\documentclass[12pt]{amsart}
%\usepackage{tweaklist}
\usepackage{cancel}
\usepackage{xspace}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{subfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[a4paper,width=160mm,top=18mm,bottom=21mm,includeheadfoot]{geometry}
\usepackage{booktabs}
\usepackage{array}
\usepackage{verbatim}
\usepackage{caption}
% \usepackage{natbib}

\usepackage{float}
\usepackage{pdflscape}
\usepackage{mathtools}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{afterpage}
\usepackage{tikz}
\usepackage[hyperfootnotes=false, bookmarks=true, unicode=true, pdftitle={Ethereum Yellow Paper: a formal specification of Ethereum, a programmable blockchain}, pdfauthor={Dr. Gavin Wood},pdfkeywords={Ethereum, Yellow Paper, blockchain, virtual machine, cryptography, decentralised, singleton, transaction, generalised},pdfborder={0 0 0.5 [1 3]}]{hyperref}
%,pagebackref=true

\usepackage{tabu} %requires array.
\def\els@aparagraph[#1]#2{\elsparagraph[#1]{#2}}
\def\els@bparagraph#1{\elsparagraph*{#1}}
\newcommand\eatpunct[1]{}
%This should be the last package before \input{Version.tex}
\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}
% "hyperref loads the url package internally. Use \PassOptionsToPackage{hyphens}{url}\usepackage{hyperref} to pass the option to the url package when it is loaded by hyperref. This avoids any package option clashes." Source: <https://tex.stackexchange.com/questions/3033/forcing-linebreaks-in-url/3034#comment44478_3034>.
% Note also this: "If the \PassOptionsToPackage{hyphens}{url} approach does not work, maybe it's "because you're trying to load the url package with a specific option, but it's being loaded by one of your packages before that with a different set of options. Try loading the url package earlier than the package that requires it. If it's loaded by the document class, try using \RequirePackage[hyphens]{url} before the document class." Source: <https://tex.stackexchange.com/questions/3033/forcing-linebreaks-in-url/3034#comment555944_3034>.
% For more information on using the hyperref package, refer to e.g. https://en.wikibooks.org/w/index.php?title=LaTeX/Hyperlinks&stable=0#Hyperlink_and_Hypertarget.

\makeatletter
 \newcommand{\linkdest}[1]{\Hy@raisedlink{\hypertarget{#1}{}}}
\makeatother
\usepackage{seqsplit}

% For formatting
%\usepackage{underscore}
%\usepackage{lipsum} % to generate filler text for testing of document rendering
\usepackage[english]{babel}
\usepackage[autostyle]{csquotes}
\MakeOuterQuote{"}

\usepackage[final]{microtype} % https://tex.stackexchange.com/questions/75140/is-it-possible-to-make-latex-mark-overfull-boxes-in-the-output#comment382776_75142
\usepackage{lastpage}
\usepackage{footnote}
\usepackage{caption}
\definecolor{Orange}{rgb}{0.241,0.349,0.090}
% \usepackage{bbding}
\usepackage{shortvrb}
%% \usepackage{draftwatermark}
%% \SetWatermarkText{Esborrany}
%% \SetWatermarkScale{0.5}
%% \usepackage{tocloft}
% \usepackage{hyperref}
% \usepackage{bookmark}
\usepackage[titletoc]{appendix}


% \input{Version.tex}
% Default rendering options
\definecolor{pagecolor}{rgb}{1,0.98,0.9}
\def\YellowPaperVersionNumber{unknown revision}
\IfFileExists{Options.tex}{\input{Options.tex}}

\newcommand{\hcancel}[1]{%
    \tikz[baseline=(tocancel.base)]{
        \node[inner sep=0pt,outer sep=0pt] (tocancel) {#1};
        \draw[black] (tocancel.south west) -- (tocancel.north east);
    }%
}%


\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\newcommand*\eg{e.g.\@\xspace}
\newcommand*\Eg{e.g.\@\xspace}
\newcommand*\ie{i.e.\@\xspace}
%\renewcommand{\itemhook}{\setlength{\topsep}{0pt}  \setlength{\itemsep}{0pt}\setlength{\leftmargin}{15pt}}


\title{Wireless service accounting based on Ethereum state channels
- Master Thesis}

\author{
  A. Egio,
  L. González, A. Pardo, T. Romero
}


\begin{document}

\pagecolor{pagecolor}


\begin{abstract}
  \begin{center}
    This document contains authors' ``\textit{Blockchain
      technologies master}''\footnote{UPC School
      of Professional \& Executive Development}
    final thesis. The project described in the document
    consists on a technological proof
    of concept of an internet access service consumption
    using a state channel smart contract as
    mean of payment. After a brief
    introduction, there's a first motivation of
    the use case included;
    in the following sections
    there's a detailed explanation of
    the architecture, implementation and
    security considerations;
    after that it is described a more
    general approach about using blockchain technologies
    and state channels in particular to provide
    mechanisms to reduce advanced wireless
    (i. e. 5G) services market friction between neutral host
    providers, virtual operators and operators
    purchasing licenses of spectrum bands to nations' governments;
    guarantee transparency to consumers,
    and provide a fully GDPR compliant
    schema relying on a self-sovereign identity system.
  \end{center}
\end{abstract}

\maketitle

\tableofcontents

\newpage

\setlength{\columnsep}{20pt}
\begin{multicols}{2}
\section{Introduction}\label{sec:introduction}

\vspace{0.35cm}
As exposed in \cite{spectrumnh} although radio spectrum
``\textit{is often
  referred to as a `scarce resource`}'' there are
spectrum management strategies
being researched to improve and
support a brand new model of services
into the market; in particular there are
multiple 5G\cite{5g} innovative projects and initiatives
that try to solve this challenges using Software
Defined Network\cite{sdns}
and Network Function Virtualization\cite{nfv}.

\vspace{0.35cm}

Since spectrum is a scarce resource, it can
be tokenized being suited this
way for blockchain/DLT technologies business models;
in addition, since
atmospheric spectrum can be considered a public
asset, it's initially managed by nations' governments
and its licensing and commercial usage should feature
a high level of transparency and at the same time
allow for efficiency and fair-competition making it
feasible to model on public blockchain systems.

\vspace{0.35cm}

Taking this into account, lead the authors' to develop
a first bottom-up proof of concept of a simple system
demonstrating how can a wireless WiFi hotspot
deployed on a commodity hardware asset\cite{RaspberryPi19}
be managed to allow users to access the internet
paying in exchange for Ethereum on a public network.

\vspace{0.35cm}

One of the first intiatives to create
a bandwidth reselling market was La Fonera\cite{fon}
back in 2006. Main goal of the initiative was
to allow ADSL users to share unused bandwidth using
a specific WiFi hotspot deployed on an ad-hoc
built router.

\begin{center}
  \includegraphics[keepaspectratio, width=0.2\textwidth]{images/lafonera-sourcewikipedia.eps}
  \\
  Figure 1. \textit{La Fonera's initial project router.}
\end{center}

\vspace{0.35cm}

A more recent project like Hotspot Me\cite{hotspotme}
and also very aligned with the technological demonstration
described in this document consist on using mobile
APIs to allow users to share WiFi hotspot tethering
to users nearby in exchange for ETH supported by a
micro-payment channel contract.


\section{Technological background}\label{ch:bc}

\vspace{0.35cm}

Blockchain technologies support a ledger of records in
continuous growth called blocks.
They are linked and secured by
cryptography. Adopt the P2P protocol
(\textit{peer-to-peer}) in order to be distributed
with not a single point of failure.

\vspace{0.35cm}

The consensus mechanism ensures a common order
of unambiguous transactions and
blocks, and guarantees integrity and
blockchain consistency a
through geographically distributed nodes.
By its design, the blockchain has characteristics
such as: decentralization, integrity and auditability.
The blockchain can serve as a new
type of software connector, which should be considered
as a possible decentralized alternative to storage
of existing centralized shared data.

\vspace{0.35cm}

In addition, depending on the different levels of
access permission, block chains can
split into two types:
1) public (such as Bitcoin and Ethereum); Y
2) private (such as Hyperledger). Blockchain serves
as a platform for smart contracts
(hereinafter, \ textit {smart contracts}).
For example, programmed in the Solidity language of
Ethereum, stay and run.
Blockchain is a technology concept
DLT distributed ledger
(\ textit {distributed ledger technology}).
It can be integrated into multiple business areas.


Ethereum
blockchain is proposed as a first optimal candidate platform
to support this project PoC attending to
following reasons:

\begin{itemize}
\item Is the most used and mature
turing-complete-programmable blockchain technology.
\item Support for high quality and audited
libraries in Solidity (most used smart contract language in Ethereum).
\item Developments on Ethereum can be deployed
over public (main or testnets) or private/permissioned networks.
\item Unlike Bitcoin, Ethereum supports miner fees using gas
instead of directly ETH; this can mitigate the effects of
volatile crypto-currency price by adjusting gas price depending
on ETH value.
\end{itemize}

%% \textit{ETH-Paid hotspot provider} (E-Php).
%% \\
%% \\
%% \textit{Hotspot handler} (hh).
%% \\
%% \\
%% \textit{Upstream Internet Service Provider} (U-ISP).
%% \\

\section{Proof of Concept description}

\subsection{Architecture}
\label{ch:architecture}
\vspace{0.35cm}

In order to support the PoC a
Raspberry Pi 3 Model B (see figure 2) has been used
as a single board computer to host all the required software.
Tested operative system was OSMC\cite{osmc} (a Debian based
GNU-Linux flavor) mainly used as media-center.
A WiFi access point using
hostapd\cite{hostapd} daemon over Raspberry's WiFi chipset.
Raspberry Pi was also connected using ethernet cable
to an optical fiber commercial router (\textit{see figure 2}).

\begin{center}
%\begin{figure}[h]
%  \centering
  \includegraphics[keepaspectratio, width=0.5\textwidth]{images/physical-setup-y.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
  %\end{figure}
\\
Figure 2. Physical Setup.
\\

\vspace{0.35cm}

% \begin{tabular} to 0.5\textwidth { | X[l] | X[r] | }
\begin{tabular}{ | m{0.125\textwidth} | m{0.3125\textwidth} | }
 \hline
 Specs & Raspberry Pi 3 Model B \\
 \hline
 CPU & Broadcom BCM2837, Cortex-A53 (ARMv8) 64-bit SoC @ 1,2 GHz \\
\hline
 RAM & 1 GB \\
\hline
 Connectivity & Wi-Fi 802.11 b/g/n (2,4 GHz) Bluetooth 4.1 Ethernet card up to 100 Mbps \\
\hline
 Ports & Full HDMI, 4 USB 2.0, MicroSD, CSI camera, DSI display \\
\hline
 Memory & MicroSD \\
\hline
\end{tabular}
\end{center}
\vspace{0.15cm}
Table 1. Raspberry Pi 3 Model B specs
Although it is not expressly indicated if it is free hardware
(\textit{open hardware}) or with trademark rights, on the
official website there's an explanation regarding
that Raspberry have distribution and sales contracts with
two companies and guarantee that anyone can become a reseller or
redistributor of Raspberry Pi cards [RaspberryPiBuy 19].

\vspace{0.35cm}

Dnsmasq\cite{dnsmasq} was used
as dynamic host configuration server for the wireless
network users and
iptables\cite{iptables} was used as a firewall running
both inside the Raspberry; by default, iptables
was configured to
drop all packet
forwarding traffic from users connected to the wireless
domain and at the same time to redirect all
traffic to Raspberry's HTTP port where a
captive portal was listening incoming connections.


\subsection{General work-flow}

\vspace{0.35cm}

Main idea is that the users can join freely
to the wireless hotspot and access the web captive portal
(\textit{hosted on the same Raspberry}) application that
communicates with a back-end that controls iptables
rules and also an Infura light proxy able to relay RPC
calls arriving on 8545 port of the Raspberry.

\vspace{0.35cm}

The connection flow as shown in figure 3, can be summarized
as follows:

\begin{itemize}
\item[] 1) The user associates the laptop with the WiFi hotspot.
\item[] 2) Once connected is redirected to the captive portal front-end.
\item[] 3) Front provisions MetaMask as Web3 provider.
\item[] 4) Front-end uses MetaMaskto allow the user
  to send value to the contract opening a \textit{state channel}
(\textit{see section below}).
\item[] 5-6) Signed transaction is relayed through a light Infura proxy listening
  on port 8545.
\item[] 7) Once transaction is confirmed, the back-end iptables controller
  start forwarding user's traffic.
\end{itemize}

\begin{center}
%\begin{figure}[h]
%  \centering
  \includegraphics[keepaspectratio, width=0.5\textwidth]{images/con-flow-y.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
%\end{figure}
\\
Figure 3. Connection work-flow.
\\
\end{center}

\begin{center}
%\begin{figure}[h]
%  \centering
  \includegraphics[keepaspectratio, width=0.2\textwidth]{images/rpi3modelb-sourceamazon.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
%\end{figure}
\\
Figure 4. Raspberry Pi 3 Model B.
\\
\end{center}

\subsection{Detailed software description}

\vspace{0.35cm}

This section includes a detailed rationale software description of all
the components and subcomponents.

\subsubsection{Smart contract}

\vspace{0.35cm}

The smart contract\cite{state-channel-contract-a} used
to implement the proof of concept consists on a simple
uni-directional micro-payment channel that is Ownable
depending on OpenZeppelin contract; uses also OpenZeppelin's
SafeMath library in order to perform accounting operations
and finally uses also OpenZeppelin's ECDSA library to support
the signature validation on the closing channel operation.

\vspace{0.35cm}

Main data stucture of the contract described below:

\vspace{0.35cm}

\paragraph{ChannelData} Includes payer ethereum address,
its state channel ephemeral address, deposit amount, opening time
and a boolean representing the open/close status of the channel.

\vspace{0.35cm}

Contract's storage variables:

\vspace{0.35cm}

\paragraph{channelCount} uint256 variable that increments
in a unit every time a user opens a channel. This operation
does not rely on SafeMath since it's virtually impossible to
overflow a uint256 storage record.

\vspace{0.35cm}

\paragraph{channelMapping} Holding a key-value map between
channelCount values and channelData structures.

\vspace{0.35cm}

\paragraph{pricePerSecond} Constant keeping track of
service price per second.

\vspace{0.35cm}

The main methods of the smart contract:

\vspace{0.35cm}

\paragraph{openChannel} receives as parameters, the ephemeral address
of the user and also the purchased service value.

\vspace{0.35cm}

\paragraph{closeChannel}


\vspace{0.35cm}

\section{Quality considerations}\label{sec:proofs}

\vspace{0.35cm}

To validate the PoC, a battery of tests has been defined. For example, given
that smart contract normally handle money, it is essential to ensure that
its number of failures and vulnerabilities is low [Hegedus 18].
To help developers and make technology more mature,
we need analysis tools [ConsenSys 19].

\vspace{0.35cm}

For this project, we used Mythril from ConsenSys. Mythril is a
security analysis tool for EVM (Ethereum Virtual Machine) bytecode.
It detects security vulnerabilities in smart contracts built for Ethereum.

\vspace{0.35cm}

We analysed the Solidity-based smart contract called
StateChannel.sol (of this project).

The installation steps are as follows in:

https://github.com/ethereum-internet-access/mythril
Firstly, we analysed the local source code:

\begin{verbatim}
$ cd contracts
$ myth analyze StateChannel.sol \
  > ./security-report
$ cat ./security-report
\end{verbatim}

\vspace{0.35cm}

Secondly, we analysed on-chain smart contract.
Because the smart contract was deployed on Ropsten testnet we executed:

\begin{verbatim}
$ myth analyze --rpc \
  infura-ropsten -a \
  contract_address \
  > ./security-report
$ cat ./security-report
\end{verbatim}


\section{Deployment}\label{sec:deploy}

\vspace{0.35cm}

Docker is a tool that allows you to deploy applications
inside of software containers. This can be useful for our
Raspberry Pi because it allows users to run applications with
very little overhead, as long as the application
is packaged inside of a Docker image.

\vspace{0.35cm}

We simply install Docker and run the container over Raspbian/ARM.
It would deploy the done project. The script to execute is as follows:

\begin{verbatim}
$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install curl
$ curl -sSL https://get.docker.com | sh
$ sudo apt-get install git
$ git clone \
  https://github.com/ \
  ethereum-internet-access/docker.git
$ cd docker
$ sh ./install-project\
  -inside-docker-container.sh
\end{verbatim}





\section{Further steps}

\subsection{5G Technologies and scarcity model}
\vspace{0.35cm}

In the recent years blockchain technologies
and in particular smart contracts have made possible
an innovative way to rule business and
processes between organizations.

\vspace{0.35cm}

One of the main application of smart contracts
consist on modeling a scarce resource representing
it using fungible (or not) tokens; in addition
to this, smart contracts can be programmed
to suit any possible business intelligence
according to rules well known and accepted
in advance by the parties transacting.

\vspace{0.35cm}

In the case of 5G technologies for practical reasons
and the high density of antennas required,
different operators shall be able
to dynamically share the same resources (i.e. neutral host
infrastructure). At the same time in order to manage
service operation efficiently through its whole
life-cycle there's the need to automate as much as
possible all the operations; this requirements
perfectly fit smart contract capabilities, in order
to model and operate over a defined set of rules
supporting payments, escrows, rewards or penalties
depending on different conditions.

\end{multicols}
\begin{center}
%\begin{figure}[h]
  %  \centering
  \includegraphics[keepaspectratio, width=0.8\textwidth]{images/bc5g/slices-y.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
%\end{figure}
\\
Figure 5. Slicing model.
\\
\end{center}
\begin{multicols}{2}

As an example, in figure 5 it's shown how three virtual operators over
different infrastructures shared or not in a slice-model of a neutral host
infrastructure; a slice can be described as a dynamic virtualization
allowing multitenancy of some physical resources like access points,
physical switches and datacenters including mobile edge computing
appliances; this is the case of currently in execution projects like
5GCity\cite{5gcity} where a distributed cloud
and radio platform for municipalities and infrastructure owners acting
as 5G neutral hosts is being developed and tested. Platforms
targeting 5G business models such as 5GCity can benefit from adding
this smart contract business logic in order to bill end-users and automate
all the accounting part.

\subsection{Know your customer issue}

\vspace{0.35cm}

Although this is a promising approach; there's an issue with it regarding
regulation, in particular in the European Union, there's the requirement
that a telecommunication service provider must know their customers; this
is required for example to allow judge requirements of users identity
in case there's some evidence of illegal activities. As a single payment
system, state channel smart contracts are pseudoanymous hence do not
support the \textit{Know Your Customer - KyC} required by regulation.

\vspace{0.35cm}

To take into account the problem illustrated in previous paragraph
we can take as a basis a model of self-sovereign identity\cite{allen}
and in particular the one recently anounced by the authorities
of Catalonia government\cite{identicat} that will provide credentials
to citizens using DLT technologies as a Public Key Infrastructure; this
model could allow in some near future to give the citizen the option
of registering identity in such a way that the credential can be linked
to some administration database that could be queried only by a judge
requirement and guarantee the users identities are recognized



\end{multicols}

\begin{center}
%\begin{figure}[h]
  %  \centering
  \includegraphics[keepaspectratio, width=0.8\textwidth]{images/bc5g/bc5g-y.eps}
  \includegraphics[keepaspectratio, width=0.8\textwidth]{images/bc5g/bc5g2-y.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
%\end{figure}
\\
Figure 6. Upper figure shows a scenario where different users connect
to antennas controlled by a state channel smart contract like the one
described in this thesis; users remain pseudoanonymous and hence, the
schema is not regulation compliant regarding the KyC that a
telecommunications
operator should guarantee in case of legal issues. On the other hand,
relying on a self-sovereign decentralized identity bottom figure shows
up how the citizens can authenticate themselves to the system with the
guarantee there's a public administration validating their identities.
\\
\end{center}

\begin{multicols}{2}
by a public administration; this way, the service provider (\textit{in
  our case a telecommunications operator}) does not need to know
anything about a customer appart from a public key and a valid
credential signed by the administration. This schema could be a real game
changer regarding operators competitivity since they get rid-off
from several and costly processes that do not add any value to the service
they provide:

\begin{itemize}
\item Fully automated accounting and billing layer.
\item Regulation compliance without KyC on-boarding process.
\item GDP compliance by default. Operator does not need to know
  user's name, bank account, etc.
\end{itemize}

\subsection{Instant portability}

\vspace{0.35cm}

This approach to the way customers interact with telecommunication
operators relying on a publicly recognized self-sovereign identity
can support a new way of handling portability granting full customer
empowerment when they want to switch from one operator to another;
in figure 5, is represented a process on a user opens a channel
in operator's A smart-contract; after that begins transacting with
this first operator paying as they consume the access service
sending micro-payments to the operator.

\vspace{0.35cm}

After that, user decides to switch to a second operator, opening a channel
over operator B's contract; since operator B, stops receiving the signed
micropayments, opts for closing the channel backdrawing the earnings in operator's
account and return value for the user. Such kind of process can be accomplisehd
in a matter of seconds for a few cents fee literally obliterating any
operator lock-in mechanism thus supporting a really zero friction service market.

\end{multicols}


\begin{center}
%\begin{figure}[h]
  %  \centering
  \includegraphics[keepaspectratio, width=0.6\textwidth]{images/bc5g/sc1-y.eps}
  \includegraphics[keepaspectratio, width=0.6\textwidth]{images/bc5g/sc2-y.eps}
  \includegraphics[keepaspectratio, width=0.6\textwidth]{images/bc5g/sc3-y.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
%\end{figure}
\\
Figure 5. State channels support instant portability
between different operators with minimal fee.
\\
\end{center}
\begin{multicols}{2}

  \subsection{Towards telco market full tokenization}

  \vspace{0.35cm}

  This model can be extended without limits to the full wireless
  telecommunication market tokenization; as depicted in figure 6,
  from the spectrum auctioning, including infrastructure providers
  virtualizing their appliances for virtual operators, end to users
  service provision and accounting relying on a self-sovereign
  identity system.


\end{multicols}
\begin{center}
%\begin{figure}[h]
  %  \centering
  \includegraphics[keepaspectratio, width=0.8\textwidth]{images/bc5g/beyond-y.eps}
%  \caption{Figura 2. Raspberry Pi 3 Modelo B. Fuente: [Raspberry 18]}
%\end{figure}
\\
Figure 6. Full tokenization of wireless services from
the spectrum licensing to the citizen.
\\
\end{center}
\begin{multicols}{2}


\vspace{0.35cm}

\subsubsection{Smart contract}
\subsubsection{Front-end} \label{ch:front-end}
\subsubsection{Back-end} \label{ch:back-end}

% \subsection{Implementation} \label{ch:implementation}



%% \section{Viabilidad de negocio}\label{sec:business}
%% (Por completar)
%% Comento el tema viabilidad de negocio porque ya está discutida
%% en Further steps

\subsection{Regulation considerations} \label{ch:regulation}

\vspace{0.35cm}

TODO; talk about GDPR, telco KyC, european market regulation, etc.

\section{Conclusions}\label{sec:conclusions}

\vspace{0.35cm}

World we live today is interconnected and wireless
internet access has a foundamental role. In this project
a Proof of Concept has been build. This PoC based in
commodity free hardware asset (Raspberry Pi) can serve
as an example of end-user wireless provision pay-as-you-go
using a state channel Solidity smart contract; KyC issues
and identity consideration have been discussed also leading
to the conclusion that complementing this approach with
what a self-sovereign identity can provide there's no need
to a telecommunication operator to perform a KyC process
in order to provision a service to a client.

\vspace{0.35cm}

One of the major problems with this approach has to do
with ETH-fiat exchange volatility
(\textit{see figure 7}), anyway, including
a feature to regulate minute price in the state channel
contract and taking into account gas prices can adjust
in order to properly
represent computation, bandwidth and storage costs this
problem can be completely avoided.

\begin{center}
%\begin{figure}[h]
%  \centering
  \includegraphics[keepaspectratio, width=0.481125\textwidth]{images/ethcurrentprice-sourcecoinbase.eps}
%  \caption{Figura 3. Variación cotización ETH (11/08/2019)}
%\end{figure}
\\
Figure 7. ETH Price chart (11/08/2019). Source: [Coinbase 19]
\\
\end{center}

%% \subsection{Añadir forma de pago DAI} \label{ch:dai}
%% DAI es una criptomoneda estable (\textit{stablecoin}) que funciona con ETH y que intenta mantener un valor de 1\$. A diferencia de los billetes de banco centralizados, DAI no está respaldado por dólares estadounidenses en una cuenta bancaria. En cambio, está respaldado por garantías en la plataforma Maker [MakerDAO 19].
%% \subsection{Usar Raspberry Pi 4 Modelo B} \label{ch:rpi4modelb}
%% Anunciado en Junio de 2019 y a la venta. Es un hardware que ofrece mejores prestaciones. Por ejemplo, el procesador es un Broadcom BCM2711. Un ARM Cortex-A72 de cuatro núcleos y a 1,5 GHz. Hasta tres veces más eficiente (\textit{benchmark}) que el modelo anterior (Raspberry Pi 3 Modelo B+). También da la posibilidad de elegir entre 1, 2 y 4 GB de RAM.
\subsection{Usar Docker Swarm} \label{ch:dockerswarm}
Se podría presentar una aplicación descentralizada basada en microservicios. Por ejemplo en microservicios, un contenedor Docker (como en la sección 4) podría verse como un servicio. Entre las ventajas que aporta microservicios estarían:
\begin{itemize}
 \item Pequeños
 \item Independientes
 \item Despliegue sencillo
 \item Reutilizables
 \item Externalización
 \item Escalabilidad
 \newline
\end{itemize}
Para ello, Docker ofrece un orquestador (de código abierto) llamado Docker Swarm (véase figura 4). Un nodo \textit{worker} sería nuestra Raspberry Pi y un nodo \textit{manager} sería un centro de control.
\begin{center}
%\begin{figure}[h]
%  \centering
  \includegraphics[keepaspectratio, width=0.481125\textwidth]{images/swarm-diagram-sourcedocker.eps}
%  \caption{Figura 3. Variación cotización ETH (11/08/2019)}
%\end{figure}
\\
Figura 4. Diagrama Docker Swarm. Fuente: [Docker 19]
\\
\end{center}

\section{Repositorio}\label{sec:repository}
El código fuente generado en el proyecto está publicado en un repositorio público de GitHub bajo licencia MIT.
\newline\newline
\url{https://github.com/ethereum-internet-access}
\newline
\begin{thebibliography}{9}
\bibitem{spectrumnh}
  \href{https://uk5g.org/media/uploads/resource_files/Spectrum\_NH\_discussion\_paper\_20Feb19.pdf}{5G Spectrum and Neutral Hosting}, Discussion paper, February 2019,
  DCMS Phase 1 5G Testbeds \& Trials Programme
\bibitem{5g} \href{https://en.wikipedia.org/wiki/5G}{https://en.wikipedia.org/wiki/5G}
\bibitem{sdns} Ian F. Akyildiz and Shih-Chun Lin and Pu Wang,
  \textit{Wireless software-defined networks (W-SDNs) and network function virtualization (NFV) for 5G cellular systems:
    An overview and qualitative evaluation}, Computer Networks, 93, 2015
\bibitem{nfv} Jose Ordonez-Lucena et al.
  \textit{Network Slicing for 5G with SDN/NFV: Concepts, Architectures, and Challenges},
   IEEE Communications Magazine ( Volume: 55 , Issue: 5 , May 2017 )
\bibitem{fon} \href{https://es.wikipedia.org/wiki/La_Fonera}{https://es.wikipedia.org/wiki/La\_Fonera}
\bibitem{hotspotme} \href{https://devpost.com/software/hotspot-me}{https://devpost.com/software/hotspot-me}
\bibitem{hostapd} \href{https://w1.fi/hostapd/}{https://w1.fi/hostapd/}
\bibitem{iptables} \href{https://linux.die.net/man/8/iptables}{https://linux.die.net/man/8/iptables}
\bibitem{dnsmasq} \href{https://en.wikipedia.org/wiki/Dnsmasq}{https://en.wikipedia.org/wiki/Dnsmasq}
\bibitem{osmc} \href{https://osmc.tv/}{https://osmc.tv/}

\bibitem{state-channel-contract-a}
  \href{state-channel-contract-a on GitHub}{https://github.com/ethereum-internet-access/state-channel-contract-a}
\bibitem{etherwall}
  \href{etherwall on GitHub}{https://github.com/ethereum-internet-access/etherwall}
\bibitem{etherdoor}
  \href{etherdoor on GitHub}{https://github.com/ethereum-internet-access/etherdoor}

\bibitem{5gcity} \href{https://www.5gcity.eu/}{https://www.5gcity.eu/}
\bibitem{allen}  \href{Christopher Allen, The path to self sovereign identity, 2016}
  {http://www.lifewithalacrity.com/2016/04/the-path-to-self-soverereign-identity.html}
\bibitem{identicat}
  \href{Catalonia to Build DLT-Based Identity, Coindesk, 2019}{https://www.coindesk.com/catalonia-government-to-build-dlt-based-identity-platform-for-citizens}


\bibitem{Coinbase19} Coinbase. Intercambio de moneda digital \href{https://www.coinbase.com/price/ethereum}{https://www.coinbase.com/price/ethereum}
\bibitem{ConsenSys19} Ethereum Smart Contract Best Practices. Security tools. ConsenSys. 12 Agosto 2019.
\bibitem{Docker19} Docker Documentation. How nodes work. 6 Septiembre 2019.  \href{https://docs.docker.com/engine/swarm/how-swarm-mode-works/nodes/}{https://docs.docker.com/engine/swarm/how-swarm-mode-works/nodes/}
\bibitem{ETHBerlinZwei19} Hackathon ETH Berlín Zwei. Twitter. 6 Septiembre 2019. \href{https://twitter.com/ETHBerlin}{https://twitter.com/ETHBerlin}
\bibitem{Hegedus18} P. Hegedus. "Towards Analyzing the Complexity Landscape of Solidity Based Ethereum Smart Contracts". 2018 IEEE/ACM 1st International Workshop on Emerging Trends in Software Engineering for Blockchain (WETSEB). 27 Mayo-3 Junio 2018. \href{https://ieeexplore.ieee.org/document/8445056}{https://ieeexplore.ieee.org/document/8445056}
\bibitem{MakerDAO19} MakerDAO. Stability for the blockchain.  \href{https://makerdao.com/en/dai}{https://makerdao.com/en/dai}
\bibitem{Munoz18} J. L. Muñoz. "Docker Containers". Apuntes de las clases magistrales. Máster en Tecnologías Blockchain. 1, Edición. UPC School. 29 Noviembre 2018.
\bibitem{Nakamoto08} S. Nakamoto. "Bitcoin: A Peer-to-Peer Electronic Cash System". 31 Octubre 2008.  \href{https://bitcoin.org/bitcoin.pdf}{https://bitcoin.org/bitcoin.pdf}
\bibitem{RaspberryPi19} Raspberry Pi 3 Modelo B - Placa Base (1,2 GHz Quad-Core Arm Cortex-A53, 1 GB RAM, USB 2.0). Amazon. 11 Agosto 2019.
\bibitem{RaspberryPiBuy19} Raspberry Pi FAQs. BUYING AND SHIPPING. Where can I buy a Raspberry Pi?. Página Web oficial. 11 Agosto 2019.  \href{https://www.raspberrypi.org/help/faqs/#buyingWhere}{https://www.raspberrypi.org/help/faqs/\#buyingWhere}
\bibitem{Stallings04} W. Stallings. "Comunicaciones y redes de computadores". 1 Septiembre 2004. Páginas 904. Pearson Prentice Hall. ISBN-13: 978-8420541105.
\end{thebibliography}
\clearpage


\end{multicols}


\end{document}
